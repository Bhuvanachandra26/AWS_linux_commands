                                "Memory management"


1) Setup additional swap space in the system to solve low memory issue.  The swap which you added should be available post reboot.


To know there is a free space or not

[ec2-user@ip-172-31-30-89 /]$ sudo swap free -h

[ec2-user@ip-172-31-30-89 /]$ swapon -a

[ec2-user@ip-172-31-30-89 /]$ fdisk -l
fdisk: cannot open /dev/xvda: Permission denied

[ec2-user@ip-172-31-30-89 /]$ fdisk /dev/xvda

Welcome to fdisk (util-linux 2.30.2).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

[ec2-user@ip-172-31-30-89 /]$ sudo swapon -show




2) Find out the number of process is in run queue and blocking queue.


sar -system active report

[ec2-user@ip-172-31-30-89 /]$ sar -q
Linux 5.10.96-90.460.amzn2.x86_64 (ip-172-31-30-89.ec2.internal)        02/24/2022      _x86_64_        (1 CPU)

12:00:01 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked
12:10:01 AM         2       112      0.00      0.00      0.00         0
12:20:01 AM         0       113      0.00      0.01      0.00         0
12:30:01 AM         0       111      0.00      0.00      0.00         0
12:40:01 AM         0       114      0.00      0.00      0.00         0
12:50:01 AM         0       112      0.00      0.00      0.00         0
01:00:01 AM         0       111      0.00      0.00      0.00         0
01:10:01 AM         0       113      0.00      0.00      0.00         0
01:20:01 AM         2       114      0.00      0.00      0.00         0
01:30:01 AM         0       112      0.00      0.00      0.00         0
01:40:01 AM         0       112      0.00      0.00      0.00         0
01:50:01 AM         2       112      0.00      0.00      0.00         0
02:00:01 AM         2       113      0.00      0.00      0.00         0
02:10:01 AM         2       111      0.06      0.03      0.00         0
02:20:01 AM         0       112      0.00      0.00      0.00         0
02:30:01 AM         0       112      0.04      0.01      0.00         0
02:40:01 AM         0       118      0.00      0.00      0.00         0
02:50:01 AM         0       118      0.00      0.00      0.00         0
03:00:01 AM         0       115      0.00      0.00      0.00         0
03:10:01 AM         1       115      0.00      0.00      0.00         0
03:20:01 AM         0       115      0.00      0.00      0.00         0
03:30:01 AM         0       120      0.00      0.00      0.00         0
03:40:01 AM         0       117      0.00      0.00      0.00         0
03:50:01 AM         0       120      0.00      0.00      0.00         0
04:00:01 AM         0       118      0.00      0.00      0.00         0
04:10:01 AM         0       118      0.00      0.00      0.00         0
04:20:01 AM         0       117      0.00      0.00      0.00         0
04:30:02 AM         0       117      0.00      0.00      0.00         0
04:40:01 AM         0       118      0.00      0.00      0.00         0
04:50:01 AM         0       118      0.00      0.00      0.00         0
05:00:01 AM         1       118      0.00      0.00      0.00         0
05:10:01 AM         0       118      0.00      0.00      0.00         0
05:20:01 AM         0       119      0.00      0.00      0.00         0
05:30:01 AM         0       119      0.00      0.00      0.00         0
05:40:01 AM         0       119      0.00      0.00      0.00         0
05:50:01 AM         0       116      0.00      0.00      0.00         0
06:00:01 AM         0       115      0.00      0.00      0.00         0
06:10:01 AM         0       116      0.00      0.00      0.00         0
06:20:01 AM         0       116      0.00      0.00      0.00         0
06:30:01 AM         0       116      0.00      0.00      0.00         0
06:40:01 AM         0       115      0.00      0.00      0.00         0
06:50:01 AM         2       116      0.00      0.00      0.00         0
07:00:01 AM         1       116      0.00      0.00      0.00         0
07:10:01 AM         0       116      0.03      0.01      0.00         0
07:20:01 AM         0       115      0.00      0.00      0.00         0
07:30:01 AM         0       115      0.00      0.00      0.00         0
07:40:01 AM         0       115      0.00      0.00      0.00         0
07:50:01 AM         0       115      0.00      0.00      0.00         0
08:00:01 AM         0       115      0.00      0.00      0.00         0
08:10:01 AM         0       115      0.00      0.00      0.00         0
08:20:01 AM         0       115      0.00      0.00      0.00         0
08:30:01 AM         0       114      0.00      0.00      0.00         0
08:40:01 AM         0       115      0.00      0.00      0.00         0
08:50:02 AM         0       114      0.00      0.00      0.00         0
09:00:01 AM         2       115      0.00      0.00      0.00         0
09:10:01 AM         0       115      0.00      0.00      0.00         0
09:20:01 AM         0       115      0.00      0.00      0.00         0

09:20:01 AM   runq-sz  plist-sz   ldavg-1   ldavg-5  ldavg-15   blocked
09:30:01 AM         0       115      0.00      0.00      0.00         0
09:40:01 AM         2       115      0.00      0.00      0.00         0
09:50:01 AM         0       115      0.00      0.00      0.00         0
10:00:01 AM         0       115      0.00      0.00      0.00         0
10:10:01 AM         0       115      0.03      0.01      0.00         0
10:20:01 AM         0       114      0.00      0.00      0.00         0
10:30:01 AM         0       114      0.00      0.00      0.00         0
10:40:01 AM         2       115      0.00      0.00      0.00         0
Average:            0       115      0.00      0.00      0.00         0

[ec2-user@ip-172-31-30-89 /]$ sar -r        memory

[ec2-user@ip-172-31-30-89 /]$ sar -B        pagging

[ec2-user@ip-172-31-30-89 /]$ sar -S        swap

[ec2-user@ip-172-31-30-89 /]$ sar -d        disk

